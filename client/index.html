<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Dialectical Map</title>

        <link rel="icon" href="favicon.gif">
        <link rel="stylesheet" href="style.css">

        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.5/angular.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.11/lodash.min.js"></script>

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/solid.css" integrity="sha384-osqezT+30O6N/vsMqwW8Ch6wKlMofqueuia2H7fePy42uC05rm1G+BUPSd2iBSJL" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/fontawesome.css" integrity="sha384-BzCy2fixOYd0HObpx3GMefNqdbA7Qjcc91RgYeDjrHTIEXqiF00jKvgQG0+zY/7I" crossorigin="anonymous">
        <script src="app.js"></script>
    </head>

    <body ng-app="dmApp" ng-controller="MainController" ng-init="initialize()">
        <!-- DM Header -->
        <div class="dmHeaderContainer noSelect">
            <div ng-click="logMapState()" class="dmLogoBlock">
                <img class="dmHeaderImg" ng-src="images/DM-Logo-HiRes.gif"/>
            </div>
            <div class="dmHeader">
                <h1 id="topBarApplicationTitle" class="header1Common dmDarkGrey">
                    Dialectical Maps
                </h1>
                <div class="headerButtonGroup dmDarkGrey">
                    <i title="Undo" ng-click="undo()" class="fas fa-undo headerIconIndividual noSelect"></i>
                    <i title="Redo" ng-click="redo()" class="fas fa-redo headerIconIndividual noSelect"></i>
                    <i title="Download" ng-click="download()" class="fas fa-download headerIconIndividual noSelect"></i>
                    <button ng-click="submit()" class="headerButton">Submit</button>
                </div>
            </div>
        </div>
        <!-- DM Application body -->
        <div class="dialecticalContainer">
            <h2 class="header2Common dmDarkGrey">
                {{mapState.assignment}}
            </h2>
            <h1 class="header1Common dmDarkGrey">
                {{mapState.title}}
            </h1>
            <!-- container for reason area -->
            <div class="reasonContainer">
                <!-- container for stances -->
                <div class="whiteSpaceRemove">
                    <div class="stanceContainer noSelect">
                        <h1 class="header1Common dmBlue stanceTitle">{{mapState.thesisBlue}}</h1>
                    </div>
                    <div class="stanceSpacer noSelect"></div>
                    <div class="stanceContainer noSelect">
                        <h1 class="header1Common dmYellow stanceTitle">{{mapState.thesisYellow}}</h1>
                    </div>
                </div>
                <!-- TODO linked reason blocks, empty if no links -->
                <div>
                    <!-- TODO -->
                </div>
                <div class="whiteSpaceRemove">
                    <div class="commonCol">
                        <!-- Blue existing reason block -->
                        <div ng-repeat="reason in mapState.reasons | filter: blueFilter track by reason.reasonID" class="reasonBlock dmBlueBackground">
                            <!-- Reason control and strength -->
                            <div>
                                <h1 class="reasonBlockTitle header1Common dmWhite noSelect">
                                    Reason
                                    <div class="reasonButtonGroup">
                                        <i class="fas fa-caret-square-up clickable"></i>
                                        <i class="fas fa-caret-square-down clickable"></i>
                                        <i ng-click="removeReason(reason)" class="fas fa-minus-square clickable"></i>
                                    </div>
                                </h1>
                                <div class="strengthBlock noSelect">
                                    <h3 class="header3Common dmWhite strengthHeader">
                                        STRENGTH
                                    </h3>
                                    <div class="strengthControlsBlue">
                                        <h1 class="header1Common strengthNumOv dmWhite">
                                            <div class="strengthAdjustContainer">
                                                <i ng-class="{softHide: reason.strength == 1}" ng-click="decreaseStrength(reason)" class="fas fa-minus clickable strengthMinus"></i>
                                                <span>{{reason.strength}}</span>
                                                <i ng-class="{softHide: reason.strength == 5}" ng-click="increaseStrength(reason)" class="fas fa-plus clickable strengthPlus"></i>
                                            </div>
                                        </h1>
                                    </div>
                                </div>
                            </div>
                            <!-- Reason content -->
                            <div class="reasonContent">
                                <textarea ng-model="reason.content" class="reasonTextArea bodyType dmDarkGrey" placeholder="Insert Reason"></textarea>
                            </div>
                            <!-- Evidence Control -->
                            <div class="noSelect">
                                <h1 class="reasonBlockTitle header1Common dmWhite evidenceTitleOv">
                                    <div class="toggleCaret clickable">
                                        <i ng-show="!reason.expanded" ng-click="toggleEvidenceVisibility(reason)" class="fas fa-caret-right"></i>
                                        <i ng-show="reason.expanded" ng-click="toggleEvidenceVisibility(reason)" class="fas fa-caret-down"></i>
                                    </div> Evidence
                                </h1>
                            </div>
                            <!-- Evidence content -->
                            <div ng-if="reason.expanded" ng-repeat="evidence in reason.evidences track by evidenceID" class="evidenceContent">
                                <!-- TODO select box polish -->
                                <div ng-class="evidence.supports ? 'dmWhiteBackground' : 'dmYellowBackground'" class="supportsSwap noSelect clickable">
                                    <h3 ng-click="toggleSupport(evidence)" class="header3Common dmDarkGrey supportsHeader">
                                        <i class="fas fa-sort swapIcon"></i>
                                        <span ng-if="evidence.supports">SUPPORTS</span>
                                        <span ng-if="!evidence.supports">OPPOSES</span>
                                    </h3>
                                    <div class="minusBlock">
                                        <i class="fas fa-minus-square minusIcon dmDarkGrey"></i>
                                    </div>
                                </div>
                                <textarea ng-model="evidence.evidenceContent" class="evidenceTextArea bodyType dmDarkGrey" placeholder="Insert Evidence"></textarea>
                                <textarea ng-model="evidence.warrantContent" class="evidenceTextArea bodyType dmDarkGrey" placeholder="Warrants"></textarea>
                                <!-- evidence empty block -->
                                <div class="addEvidenceBlock blueAddEvidenceBlock clickable">
                                    <div class="bodyType dmWhite innerEvidenceBlock noSelect">
                                            <span><i class="fas fa-plus"></i> Add Evidence</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Blue add reason block -->
                        <div ng-click="addReason(true)" class="addReasonBlock dmBlueBackground reasonBlockHeaderOv noSelect clickable">
                            <h1 class="header1Common reasonBlockHeaderOv dmWhite">
                                <i class="fas fa-plus"></i> Add Reason
                            </h1>
                        </div>
                    </div>
                    <div ng-click="linkArguments()" class="linker dmLightGreyBackground clickable">
                        <div class="innerLinker">
                            <i id="linkerArrow" class="fas fa-arrows-alt-h"></i>
                        </div>
                    </div>
                    <!-- Yellow side -->
                    <div class="commonCol">
                            <!-- Yellow existing reason block -->
                            <div ng-repeat="reason in mapState.reasons | filter: yellowFilter track by reason.reasonID" class="reasonBlock dmYellowBackground">
                                <!-- Reason control and strength -->
                                <div>
                                    <h1 class="reasonBlockTitle header1Common dmDarkGrey noSelect">
                                        Reason
                                        <div class="reasonButtonGroup">
                                            <i class="fas fa-caret-square-up clickable"></i>
                                            <i class="fas fa-caret-square-down clickable"></i>
                                            <i ng-click="removeReason(reason)" class="fas fa-minus-square clickable"></i>
                                        </div>
                                    </h1>
                                    <div class="strengthBlock noSelect">
                                        <h3 class="header3Common dmDarkGrey strengthHeader">
                                            STRENGTH
                                        </h3>
                                        <div class="strengthControlsYellow">
                                            <h1 class="header1Common strengthNumOv dmDarkGrey">
                                                <div class="strengthAdjustContainer">
                                                    <i ng-class="{softHide: reason.strength == 1}" ng-click="decreaseStrength(reason)" class="fas fa-minus clickable strengthMinus"></i>
                                                    <span>{{reason.strength}}</span>
                                                    <i ng-class="{softHide: reason.strength == 5}" ng-click="increaseStrength(reason)" class="fas fa-plus clickable strengthPlus"></i>
                                                </div>
                                            </h1>
                                        </div>
                                    </div>
                                </div>
                                <!-- Reason content -->
                                <div class="reasonContent">
                                    <textarea ng-model="reason.content" class="reasonTextArea bodyType dmDarkGrey" placeholder="Insert Reason"></textarea>
                                </div>
                                <!-- Evidence Control -->
                                <div class="noSelect">
                                    <h1 class="reasonBlockTitle header1Common dmDarkGrey evidenceTitleOv">
                                        <div class="toggleCaret clickable">
                                            <i ng-show="!reason.expanded" ng-click="toggleEvidenceVisibility(reason)" class="fas fa-caret-right"></i>
                                            <i ng-show="reason.expanded" ng-click="toggleEvidenceVisibility(reason)" class="fas fa-caret-down"></i>
                                        </div> Evidence
                                    </h1>
                                </div>
                                <!-- Evidence content -->
                                <div ng-repeat="evidence in reason.evidences track by evidenceID" ng-if="reason.expanded" class="evidenceContent">
                                    <div ng-class="evidence.supports ? 'dmWhiteBackground' : 'dmBlueBackground'" class="supportsSwap noSelect clickable">
                                        <h3 ng-click="toggleSupport(evidence)" ng-class="evidence.supports ? '' : 'dmWhite'" class="header3Common dmDarkGrey supportsHeader">
                                            <i class="fas fa-sort swapIcon"></i>
                                            <span ng-if="evidence.supports">SUPPORTS</span>
                                            <span ng-if="!evidence.supports">OPPOSES</span>
                                        </h3>
                                        <div ng-class="evidence.supports? '' : 'dmWhite'" class="minusBlock dmDarkGrey">
                                            <i class="fas fa-minus-square minusIcon"></i>
                                        </div>
                                    </div>
                                    <textarea ng-model="evidence.evidenceContent" class="evidenceTextArea bodyType dmDarkGrey" placeholder="Insert Evidence"></textarea>
                                    <textarea ng-model="evidence.warrantContent" class="evidenceTextArea bodyType dmDarkGrey" placeholder="Warrants"></textarea>
                                    <!-- evidence empty block -->
                                    <div class="addEvidenceBlock yellowAddEvidenceBlock clickable">
                                        <div class="bodyType dmDarkGrey innerEvidenceBlock noSelect">
                                                <span><i class="fas fa-plus"></i> Add Evidence</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- yellow add reason block -->
                            <div ng-click="addReason(false)" class="addReasonBlock dmYellowBackground reasonBlockHeaderOv noSelect clickable">
                                <h1 class="header1Common reasonBlockHeaderOv dmDarkGrey">
                                    <i class="fas fa-plus"></i> Add Reason
                                </h1>
                            </div>
                        </div>
                    <!-- end of replace later -->
                </div>
            </div>
        </div>
        <!-- Color v area -->
        <div class="halfVContainer">
            <div class="triBorder">

            </div>
        </div>
        <!-- container for conclusion area -->
        <div class="conclusionContainer">
            <div class="conclusionContent">
                <h1 id="conclusionTitle" class="header1Common dmDarkGrey noSelect">
                    Conclusion
                </h1>
                <div contentEditable=true data-text="Enter a conclusion here." class="conclusionText dmDarkGrey bodyType dmDarkGrey">
                    {{mapState.conclusion}}
                </div>
            </div>
        </div>
    </body>
</html>
